$(document).ready(function(){var a=function(e,d,c){$.ajax({url:"ValidateAction.aspx",success:c,data:{xml:e,schema:d},type:"POST",dataType:"json"})};var b=function(f,h){var e=$("#inputTabs");var g=e.tabs("option","selected");var d;switch(g){case 0:d=$("#splitXmlInputWrapper textarea").data("codemirror");break;case 1:d=$("#xmlTab textarea").data("codemirror");break;default:e.tabs("select",1);d=$("#xmlTab textarea").data("codemirror");break}var c=d.nthLine(f);d.selectLines(c,h)};$("#validationResult, #validationSuccess").ajaxStart(function(){$(this).addClass("hidden")});$("#executeButton").ajaxStart(function(){$(this).attr("disabled",true)}).ajaxComplete(function(){$(this).attr("disabled",false)});$("#executeButton").click(function(){$("#inputTabs").trigger("tabsselect");var d=$("#splitXmlInputWrapper textarea").data("codemirror").getCode();var c=$("#splitSchemaInputWrapper textarea").data("codemirror").getCode();a(d,c,function(f){if(!f||f.length==0){$("#validationSuccess").removeClass("hidden");return}var e=$("#validationResult ul");e.children().remove();$.each(f,function(){var i=this.lineNumber||0;var j=this.linePosition||0;var h=this.message;var k=$("<span/>").text(h).addClass("validation-message");var g=$('<a href="#"/>').text("(line "+i+" position "+j+")").addClass("validation-position");g.click(function(l){b(i,j);l.preventDefault()});$li=$("<li/>").append(k).append(g).appendTo(e);if(this.severity=="Error"){$li.addClass("ui-state-error ui-corner-all message-box");$li.prepend($('<span class="ui-icon ui-icon-alert"/>'))}else{$li.addClass("ui-state-highlight ui-corner-all message-box");$li.prepend($('<span class="ui-icon ui-icon-info"/>'))}});$("#validationResult").removeClass("hidden")})});$("#inputTabs").bind("tabsselect",function(){var c=$(this).tabs("option","selected");switch(c){case 0:var d=$("#splitXmlInputWrapper textarea").data("codemirror").getCode();$("#xmlTab textarea").data("codemirror").setCode(d);var e=$("#splitSchemaInputWrapper textarea").data("codemirror").getCode();$("#schemaTab textarea").data("codemirror").setCode(e);break;case 1:var d=$("#xmlTab textarea").data("codemirror").getCode();$("#splitXmlInputWrapper textarea").data("codemirror").setCode(d);break;case 2:var e=$("#schemaTab textarea").data("codemirror").getCode();$("#splitSchemaInputWrapper textarea").data("codemirror").setCode(e);default:break}})});